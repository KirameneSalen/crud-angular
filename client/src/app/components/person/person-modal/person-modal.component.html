<form #carForm='ngForm'>
    <div class='modal-header'>
        <h4 class='modal-title'>{{person_id ? 'Modificare' : 'Adăugare'}} mașină</h4>
    </div>

    <div class='modal-body'>
        <div class='row'>
            <label class='col-2 control-label'>Nume*</label>
            <div class='col-5'>
                <input id='nume' name='nume' #nume='ngModel' [(ngModel)]='modal.nume' class='form-control'
                    placeholder='Nume...' maxlength='255' required
                    [ngClass]="{'is-invalid': ( nume.dirty ) && !nume.valid}" />
                <div class="invalid-feedback" *ngIf="nume.dirty">
                    <span *ngIf="nume.errors?.['required']">
                        Numele este un câmp obligatoriu.
                    </span>
                </div>
            </div>
        </div>

        <div class='row'>
            <label class='col-2 control-label'>Prenume*</label>
            <div class='col-5'>
                <input id="prenume" name="prenume" #prenume="ngModel" [(ngModel)]='modal.prenume' class='form-control'
                    placeholder='Prenume...' maxlength='255' required
                    [ngClass]="{'is-invalid': prenume.touched && !prenume.valid}" />
                <div class="invalid-feedback" *ngIf="prenume.touched || prenume.dirty">
                    <span *ngIf="prenume.errors?.['required']">
                        Prenumele este un câmp obligatoriu.
                    </span>
                </div>
            </div>
        </div>

        <div class='row'>
            <label class='col-2 control-label'>CNP*</label>
            <div class='col-5'>
                <input id="cnp" name="cnp" #cnp="ngModel" [(ngModel)]='modal.cnp' class='form-control'
                    placeholder='CNP...' maxlength='13' required
                    [ngClass]="{'is-invalid': cnp.touched && !cnp.valid}" />
                <div class="invalid-feedback" *ngIf="cnp.touched || cnp.dirty">
                    <span *ngIf="cnp.errors?.['required']">
                        CNP-ul este un câmp obligatoriu.
                    </span>
                </div>
            </div>
        </div>

        <div class='row'>
            <label class='col-2 control-label'>Vârstă</label>
            <div class='col-5'>
                <input id="varsta" name="varsta" #varsta="ngModel" type='tel' [(ngModel)]='modal.varsta'
                    class='form-control' placeholder='Vârsta...' maxlength='3' disabled required
                    [ngClass]="{'is-invalid': varsta.touched && !varsta.valid}" />
                <div class="invalid-feedback" *ngIf="varsta.touched || varsta.dirty">
                    <span *ngIf="varsta.errors?.['required']">
                        Vârsta este un câmp obligatoriu.
                    </span>
                </div>
            </div>
        </div>

        <div class='row'>
            <label class='col-2 control-label'>Mașini</label>
            <div class='col-5'>
                <ng-select [items]="cars" bindLabel="nume" bindValue="id" [multiple]="true" [(ngModel)]="car_id"
                    name="carlist" #carlist="ngModel">
                </ng-select>
            </div>
        </div>
    </div>

    <div class='modal-footer'>
        <button type='button' class='btn btn-outline-dark' (click)='activeModal.dismiss()'>Renunță</button>
        <button type='submit' class='btn btn-success' (click)='save()'
            [title]="carForm.valid ? 'Salvează datele despre mașină' : 'Dezactivat deoarece formularul este invalid'"
            [disabled]="!carForm.valid">
            Salvează
        </button>
    </div>
</form>